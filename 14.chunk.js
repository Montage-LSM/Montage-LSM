webpackJsonp([14],{230:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),u=n(2);n(5);e.exports=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),c(t,[{key:"render",value:function(){return l["default"].createElement(u.Alert,{message:"需求与疑问请向技术部提出",type:"info"})}}]),t}(s.Component)},231:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),u=n(2),f=n(5);e.exports=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),c(t,[{key:"createCircle",value:function(){f.hashHistory.push("/circle/items/id/new")}},{key:"toDiscovery",value:function(){f.hashHistory.push("/circle/items/serial")}},{key:"toAllPostList",value:function(){f.hashHistory.push("/circle/posts/all")}},{key:"render",value:function(){return l["default"].createElement("div",null,l["default"].createElement(u.Button,{type:"primary",onClick:this.createCircle},"新建圈子"),"    ",l["default"].createElement(u.Button,{type:"primary",onClick:this.toAllPostList},"所有帖子"),"    ",l["default"].createElement(u.Button,{type:"primary",onClick:this.toDiscovery},"跳转到发现（排序）"))}}]),t}(s.Component)},232:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),u=n(2),f=n(5),p=n(7),d=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.toggleVisible=n.toggleVisible.bind(n),n.ajaxListSuccess=n.ajaxListSuccess.bind(n),n.ajaxToggleVisibleSuccess=n.ajaxToggleVisibleSuccess.bind(n),n.saveToOrderList=n.saveToOrderList.bind(n),n.state={orderListID:p.PRO_COMMON.localDB.getter("circleList")||[],tableConfig:{total:0,pageSize:10,pageIndex:0},tableData:[],tableColumns:function(e){return[{title:"圈子名称",dataIndex:"title",key:"title",render:function(e,t){return l["default"].createElement(f.Link,{to:"/circle/posts/"+t.circleID,title:"点击浏览属于圈子“"+t.title+"”的帖子列表",activeClassName:"active"},e)}},{title:"管理员",dataIndex:"creatorID",key:"creatorID"},{title:"创建时间",dataIndex:"createdTime",key:"createdTime"},{title:"状态",dataIndex:"isVisible",key:"isVisible",render:function(t,n){return l["default"].createElement(u.Popconfirm,{title:"确定要切换此圈子的状态？",onConfirm:function(){return e.toggleVisible(n.circleID,n.isVisible)}},l["default"].createElement("a",{href:"#"},1==n.isVisible?l["default"].createElement(u.Icon,{type:"check"}):l["default"].createElement(u.Icon,{type:"cross",style:{color:"red"}})))}},{title:"准备排序",dataIndex:"circleID",key:"circleID",render:function(t,n){var r=this;return l["default"].createElement(u.Checkbox,{className:"ant-checkbox-inline",onChange:function(){return e.saveToOrderList(r,n.circleID,n.title)},checked:function(e){return e.state.orderListID.includes(n.circleID)}(e)},function(){return n.orderNo?"已排序(当前位置["+n.orderNo+"])":"可排序"}())}},{title:"操作",key:"operation",render:function(e,t){return l["default"].createElement("span",null,l["default"].createElement(f.Link,{to:"/circle/items/id/"+t.circleID,activeClassName:"active"},l["default"].createElement(u.Icon,{type:"setting"}),"详细信息"))}}]}(n)},n}return a(t,e),c(t,[{key:"saveToOrderList",value:function(e,t,n){var r=this.state.orderListID;r.includes(t)?(p.PRO_COMMON.Array.removeValueItem(r,t),u.message.info("已经取消圈子“"+n+"”的排序属性，勾选以准备排序！",10)):(r.push(t),u.message.info("圈子“"+n+"”已经设置为可以排序，请跳转到发现列表进行排序操作！",10)),this.setState({orderListID:r}),p.PRO_COMMON.localDB.setter("circleList",r),this.forceUpdate()}},{key:"ajaxToggleVisibleSuccess",value:function(e){0==e.rc?(u.message.success(e.des),this.getList()):u.message.error(e.des)}},{key:"ajaxToggleVisibleError",value:function(){u.message.error("抱歉，该圈子状态切换时遇到错误！",5)}},{key:"toggleVisible",value:function(e,t){p.PRO_REQUEST.ajax.requestData(p.PRO_URL.circles.circle.set_visible,{circleID:e,isVisible:0==t?"1":"0"},this.ajaxToggleVisibleSuccess,this.ajaxToggleVisibleError)}},{key:"ajaxListSuccess",value:function(e){p.PRO_COMMON.obj.refsKeyTo(e.list,""),this.setState({tableData:e.list})}},{key:"ajaxListError",value:function(){}},{key:"getList",value:function(){p.PRO_REQUEST.ajax.requestData(p.PRO_URL.circles.circle.get_list,this.get_list_data,this.ajaxListSuccess,this.ajaxListError)}},{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){return l["default"].createElement("div",null,this.props.children||l["default"].createElement(u.Table,{columns:this.state.tableColumns,dataSource:this.state.tableData,expandedRowRender:function(e){return l["default"].createElement("p",null,e.information)},pagination:this.pagination}))}},{key:"pagination",get:function(){return function(e){return{total:e.state.tableData.countNo,showSizeChanger:!0,showQuickJumper:!0,onShowSizeChange:function(t,n){e.state.tableConfig.pageSize=n,e.state.tableConfig.pageIndex=t-1,e.getList()},onChange:function(t){e.state.tableConfig.pageIndex=t-1,e.getList()}}}(this)}},{key:"get_list_data",get:function(){return{pageSize:this.state.tableConfig.pageSize,pageIndex:this.state.tableConfig.pageIndex}}}]),t}(s.Component);e.exports=d}});