webpackJsonp([21],{275:function(e,t,l){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i])}return e},s=function(){function e(e,t){for(var l=0;l<t.length;l++){var i=t[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,l,i){return l&&e(t.prototype,l),i&&e(t,i),t}}(),c=l(2),d=l(1),u=i(d),m=l(31),f=i(m),h=(l(37),l(32),l(13)),_=l(7),p=c.Form.Item,g=c.Radio.Group,b=(c.Input.Group,c.DatePicker.RangePicker),y=function(e){function t(e){a(this,t);var l=n(this,Object.getPrototypeOf(t).call(this,e));return l.state={shows_qianggou:"none",visible_life:!1,visible_info:!1,visible_channel:!1,life_list_img_type:"warning",info_preach_img_type:"warning",channel_list_img_type:"warning",life_list_img_message:"暂未上传",info_preach_img_message:"暂未上传",channel_list_img_message:"暂未上传",form:{quanzi:"",life_list_img:"",info_preach_img:"",channel_list_img:"",commodity_info:"",start_time:"",end_time:""}},l.AddError=l.AddError.bind(l),l.AddSuccess=l.AddSuccess.bind(l),l.getModalFile=l.getModalFile.bind(l),l}return r(t,e),s(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("收到表单值：",this.props.form.getFieldsValue());var t=this.props.form.getFieldsValue(),l=this.state.form;t.is_invoice?t.is_invoice=1:t.is_invoice=0;var i=Object.assign(l,t);console.log("data2:",i),this.setState({form:i});f["default"].ajax.requestData(_.PRO_URL.commodity.add,i.form,this.AddSuccess,this.AddError)}},{key:"AddSuccess",value:function(e){console.log("data1:",e)}},{key:"AddError",value:function(e){console.log("err:",e)}},{key:"commodity_type_click",value:function(e,t){console.log("obj",e),console.log("e",t),0==e?(this.state.shows_qianggou="block",console.log("start_time: ",this.state.start_time)):this.state.shows_qianggou="none"}},{key:"choose_buiness_click",value:function(e){console.log("business",e)}},{key:"choose_brand_click",value:function(e){console.log("brand",e)}},{key:"add_water",value:function(e,t){console.log("obj:",e);var l=this.state.form;l[e]=l[e]+_.PRO_URL.supportMime.img_water.defaultWater,console.log("form:",l),this.setState({form:l})}},{key:"onDataPickerChange",value:function(e,t){console.log("From: ",t[0],", to: ",t[1]),this.state.form.start_time=t[0],this.state.form.end_time=t[1]}},{key:"showModal",value:function(e){var t={};t[e]=!0,this.setState(t)}},{key:"handleOk",value:function(e){var t={};t[e]=!1,this.setState(t)}},{key:"handleCancel",value:function(e){var t={};t[e]=!1,this.setState(t)}},{key:"getModalFile",value:function(e,t,l,i){var a=e[0].url,n={};if(a){n[t]="success",n[l]=u["default"].createElement("a",{target:"_blank",href:a},"上传成功"),this.setState(n);var r=this.state.form,o={};o[i]=a;var s=Object.assign(r,o);this.setState({form:s})}}},{key:"chooseCircle",value:function(e){console.log("圈子id:",e),this.state.form.quanzi=e}},{key:"search",value:function(e){console.log("search:",e)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,l={labelCol:{span:3},wrapperCol:{span:14}};return u["default"].createElement(c.Form,{horizontal:!0,onSubmit:this.handleSubmit.bind(this)},u["default"].createElement(p,o({},l,{label:"产品名称：",required:!0}),u["default"].createElement(c.Input,o({type:"text",style:{width:"50%"}},t("commodity_name"),{placeholder:"请输入产品名称"}))),u["default"].createElement(p,o({},l,{label:"所属圈子：",required:!0}),u["default"].createElement(h.SelectorCircle,o({},t("business_id",{initialValue:"1"}),{isMultiple:!1,cbReceiver:this.chooseCircle.bind(this)}))),u["default"].createElement(p,o({},l,{label:"是否电子票：",required:!0}),u["default"].createElement(c.Checkbox,o({},t("is_invoice"),{value:"1"}))),u["default"].createElement(p,o({},l,{label:"商品类型:",required:!0}),u["default"].createElement(g,t("type",{initialValue:"0"}),u["default"].createElement(c.Radio,{value:"0"},"实体商品"),u["default"].createElement(c.Radio,{value:"1"},"虚拟商品"))),u["default"].createElement(p,o({},l,{label:"是否抢购:",required:!0}),u["default"].createElement(g,t("qianggou",{initialValue:"1"}),u["default"].createElement(c.Radio,{value:"0",onClick:this.commodity_type_click.bind(this,"0")},"抢购商品"),u["default"].createElement(c.Radio,{value:"1",onClick:this.commodity_type_click.bind(this,"1")},"普通商品"))),u["default"].createElement("div",{style:{display:this.state.shows_qianggou}},u["default"].createElement(p,o({},l,{label:"抢购时间:"}),u["default"].createElement(b,{style:{width:"20%"},showTime:!0,format:"yyyy-MM-dd HH:mm:ss",onChange:this.onDataPickerChange.bind(this)})),";"),u["default"].createElement(p,o({},l,{label:"所属商家：",required:!0}),u["default"].createElement(h.SelectorBusiness,o({},t("business_id"),{isMultiple:!1,allowClear:!0,cbReceiver:this.choose_buiness_click.bind(this),value:"666"}))),u["default"].createElement(p,o({},l,{label:"品牌名称：",required:!0}),u["default"].createElement(h.SelectorBrand,o({},t("brand_id"),{isMultiple:!1,cbReceiver:this.choose_brand_click.bind(this)}))),u["default"].createElement(p,o({},l,{label:"商品件数：",required:!0}),u["default"].createElement(c.Input,o({type:"number"},t("number"),{style:{width:"50%"},placeholder:"请输入数量"}))),u["default"].createElement(p,o({},l,{label:"原价格：",required:!0}),u["default"].createElement(c.Input,o({type:"number"},t("old_price"),{style:{width:"50%"},placeholder:"请输入之前价格"}))),u["default"].createElement(p,o({},l,{label:"折扣后价格：",required:!0}),u["default"].createElement(c.Input,o({type:"number"},t("new_price"),{style:{width:"50%"},placeholder:"请输入折扣价格"}))),u["default"].createElement(p,o({},l,{label:"生活列表宣传图：",help:"上传提示：请不要超过5MB,默认生成:234px×150px"}),u["default"].createElement(c.Button,{type:"primary",required:!0,onClick:this.showModal.bind(this,"visible_life"),style:{marginRight:20,"float":"left"}},"点击上传"),u["default"].createElement(c.Modal,{title:"Modal",visible:this.state.visible_life,onOk:this.handleOk.bind(this,"visible_life"),onCancel:this.handleCancel.bind(this,"visible_life"),okText:"确定",cancelText:"取消"},u["default"].createElement(h.UploadImage,{cbReceiver:function(t){return e.getModalFile(t,"life_list_img_type","life_list_img_message","life_list_img")}})),u["default"].createElement("div",{className:"dom_left",style:{marginRight:20}},u["default"].createElement(c.Alert,{message:this.state.life_list_img_message,type:this.state.life_list_img_type})),u["default"].createElement(c.Checkbox,o({},t("life_list_img"),{onClick:this.add_water.bind(this,"life_list_img")}),"添加水印")),u["default"].createElement(p,o({},l,{label:"详情宣传图：",help:"上传提示：请不要超过5MB,默认生成:640px×340px"}),u["default"].createElement(c.Button,{type:"primary",required:!0,onClick:this.showModal.bind(this,"visible_info"),style:{marginRight:20,"float":"left"}},"点击上传"),u["default"].createElement(c.Modal,{title:"Modal",visible:this.state.visible_info,onOk:this.handleOk.bind(this,"visible_info"),onCancel:this.handleCancel.bind(this,"visible_info"),okText:"确定",cancelText:"取消"},u["default"].createElement(h.UploadImage,{cbReceiver:function(t){return e.getModalFile(t,"info_preach_img_type","info_preach_img_message","info_preach_img")}})),u["default"].createElement("div",{className:"dom_left",style:{marginRight:20}},u["default"].createElement(c.Alert,{message:this.state.info_preach_img_message,type:this.state.info_preach_img_type})),u["default"].createElement(c.Checkbox,o({},t("agreement"),{onClick:this.add_water.bind(this,"info_preach_img")}),"添加水印")),u["default"].createElement(p,o({},l,{label:"频道列表宣传图：",help:"上传提示：请不要超过5MB,默认生成:600px×254px"}),u["default"].createElement(c.Button,{type:"primary",onClick:this.showModal.bind(this,"visible_channel"),required:!0,style:{marginRight:20,"float":"left"}},"点击上传"),u["default"].createElement(c.Modal,{title:"Modal",visible:this.state.visible_channel,onOk:this.handleOk.bind(this,"visible_channel"),onCancel:this.handleCancel.bind(this,"visible_channel"),okText:"确定",cancelText:"取消"},u["default"].createElement(h.UploadImage,{fileType:"image",cbReceiver:function(t){return e.getModalFile(t,"channel_list_img_type","channel_list_img_message","channel_list_img")},description:"上传图片限制为png、jpeg、gif"})),u["default"].createElement("div",{className:"dom_left",style:{marginRight:20}},u["default"].createElement(c.Alert,{message:this.state.channel_list_img_message,type:this.state.channel_list_img_type})),u["default"].createElement(c.Checkbox,o({},t("agreement"),{onClick:this.add_water.bind(this,"channel_list_img")}),"添加水印")),u["default"].createElement(p,o({},l,{label:"商品详情图：",help:"选择此选项确定下面的富文本编辑器里面的图片是否加水印"}),u["default"].createElement(c.Checkbox,o({},t("agreement"),{onClick:this.add_water.bind(this,"commodity_info_img")}),"添加水印")),u["default"].createElement(p,o({},l,{label:"商品详情：",help:"随便写点什么"}),u["default"].createElement(c.Input,o({type:"textarea",placeholder:"随便写",style:{width:"50%"}},t("remark")))),u["default"].createElement(p,{wrapperCol:{span:16,offset:6},style:{marginTop:24}},u["default"].createElement(c.Button,{type:"primary",htmlType:"submit",style:{marginRight:20}},"确定"),u["default"].createElement(c.Button,{type:"primary",onClick:function(){window.history.go(-1)}},"返回")))}}]),t}(d.Component);y=c.Form.create()(y),y.defaultProps={ShowHeader:!1,ShowFooter:!1},e.exports=y}});