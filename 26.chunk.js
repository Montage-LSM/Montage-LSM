webpackJsonp([26],{254:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},r=function(){function e(e,t){for(var l=0;l<t.length;l++){var a=t[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,l,a){return l&&e(t.prototype,l),a&&e(t,a),t}}(),u=l(2),c=l(1),h=a(c),d=l(31),f=a(d),m=(l(32),l(13)),p=l(37),y=l(73),g=u.Form.Item,b=u.Radio.Group,k=(u.Input.Group,u.DatePicker.RangePicker,function(e){function t(e){i(this,t);var l=n(this,Object.getPrototypeOf(t).call(this,e));return l.state={shows_url:"none",shows_other:"none",visible:!1,type:"",type_name:"",img_visible:!1,img_url:"",img_state:"warning",img_info:"暂未上传"},l.getFile=l.getFile.bind(l),l}return s(t,e),r(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.form.getFieldsValue();t.img_url=this.state.img_url,t.status?t.status=1:t.status=0,console.log("收到表单值：",t),f["default"].ajax.requestData(p.gallery.add,t,this.ajaxAddSuccess,this.ajaxAddError)}},{key:"ajaxAddSuccess",value:function(e){console.log("data",e)}},{key:"ajaxAddError",value:function(e){console.log("err",e)}},{key:"onChange",value:function(e,t){console.log("From: ",e[0],", to: ",e[1]),console.log("From: ",t[0],", to: ",t[1])}},{key:"refsType_click",value:function(e,t){this.state.type=e,4==e?(this.state.shows_url="block",this.state.shows_other="none"):(this.state.shows_url="none",this.state.shows_other="block"),1==e&&(this.state.type_name="活动"),2==e&&(this.state.type_name="商品"),3==e&&(this.state.type_name="帖子")}},{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"handleOk",value:function(){this.setState({visible:!1})}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"handleImgOk",value:function(){this.setState({img_visible:!1})}},{key:"handleImgCancel",value:function(){this.setState({img_visible:!1})}},{key:"imgUpload",value:function(){this.setState({img_visible:!0})}},{key:"getFile",value:function(e){console.log("data:",e[0]);var t=e[0];t.url?this.setState({img_url:t.url,img_info:h["default"].createElement("a",{href:t.url,target:"_blank"},"上传成功"),img_state:"success"}):this.setState({img_state:"error",img_info:"蒙逼式上传失败..."})}},{key:"componentWillMount",value:function(){console.log("666");var e=((0,y.makeGuid)(),y.checkQiniu.checkQiniuToken());e||(e=y.checkQiniu.getQiniuToken()),console.log("qiniu_token",e),this.state.life_list_img_message=e}},{key:"render",value:function(){console.log("555");var e=this.props.form.getFieldProps,t={labelCol:{span:3},wrapperCol:{span:14}};return h["default"].createElement(u.Form,{horizontal:!0,onSubmit:this.handleSubmit.bind(this)},h["default"].createElement(g,o({},t,{label:"标题名称：",required:!0}),h["default"].createElement(u.Input,o({type:"text"},e("title"),{style:{width:"50%"},placeholder:"请输入标题名称"}))),h["default"].createElement(g,o({},t,{label:"是否可见：",required:!0}),h["default"].createElement(u.Switch,o({},e("status",{initialValue:"1"}),{defaultChecked:!0,checkedChildren:"开",unCheckedChildren:"关"}))),h["default"].createElement(g,o({},t,{label:"类型:",required:!0}),h["default"].createElement(b,e("refsType"),h["default"].createElement(u.Radio,{value:"1",onClick:this.refsType_click.bind(this,"3")},"帖子"),h["default"].createElement(u.Radio,{value:"3",onClick:this.refsType_click.bind(this,"2")},"商品"),h["default"].createElement(u.Radio,{value:"4",onClick:this.refsType_click.bind(this,"1")},"活动"),h["default"].createElement(u.Radio,{value:"5",onClick:this.refsType_click.bind(this,"4")},"外链"))),h["default"].createElement("div",{style:{display:this.state.shows_other}},h["default"].createElement(g,o({},t,{label:"选择:"}),h["default"].createElement(u.Button,{type:"primary",onClick:this.showModal.bind(this),style:{marginLeft:10}},"选 择",this.state.type_name),h["default"].createElement(u.Modal,{draggable:!0,title:"此模态中选择对应的圈子、帖子、新闻",visible:this.state.visible,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},h["default"].createElement("p",null,"新闻列表"),h["default"].createElement("p",null,"新闻列表"),h["default"].createElement("p",null,"新闻列表")))),h["default"].createElement("div",{style:{display:this.state.shows_url}},h["default"].createElement(g,o({},t,{label:"外链地址:"}),h["default"].createElement(u.Input,o({type:"text"},e("refsUrl"),{style:{width:"50%"},placeholder:"请输入链接地址"}))),";"),h["default"].createElement(g,o({},t,{label:"上传图片：",help:"上传提示：请不要超过5MB,默认生成:234px×150px，再次点击上传，会覆盖之前上传的"}),h["default"].createElement(u.Button,{type:"primary",required:!0,onClick:this.imgUpload.bind(this),style:{marginRight:20,"float":"left"}},"点击上传"),h["default"].createElement(u.Modal,{draggable:!0,title:"此模态中选择对应的圈子、帖子、新闻",visible:this.state.img_visible,onOk:this.handleImgOk.bind(this),onCancel:this.handleImgCancel.bind(this)},h["default"].createElement(m.UploadImage,{cbReceiver:this.getFile})),h["default"].createElement("div",{className:"dom_left",style:{marginRight:20}},h["default"].createElement(u.Alert,{message:this.state.img_info,type:this.state.img_state}))),h["default"].createElement(g,{wrapperCol:{span:16,offset:6},style:{marginTop:24}},h["default"].createElement(u.Button,{type:"primary",htmlType:"submit",style:{marginRight:20}},"确定"),h["default"].createElement(u.Button,{type:"primary",onClick:function(){window.history.go(-1)}},"返回")))}}]),t}(c.Component));k=u.Form.create()(k),k.defaultProps={ShowHeader:!1,ShowFooter:!1},e.exports=k}});