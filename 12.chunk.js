webpackJsonp([12],{250:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),u=n(s),c=a(2);a(5);e.exports=function(e){function t(){return l(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement(c.Alert,{message:"需求与疑问请向技术部提出",type:"info"})}}]),t}(s.Component)},251:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(1),d=n(c),f=a(2),h=a(5),p=(a(31),a(32)),g=(a(10),f.Form.Item),y=f.Select.Option,m=(f.DatePicker.RangePicker,function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.SelectChange=a.SelectChange.bind(a),a.createPost=a.createPost.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.SelectTypeChange=a.SelectTypeChange.bind(a),a.disabledStartDate=a.disabledStartDate.bind(a),a.disabledEndDate=a.disabledEndDate.bind(a),a.onChange=a.onChange.bind(a),a.onStartChange=a.onStartChange.bind(a),a.onEndChange=a.onEndChange.bind(a),a.state={status:1,type:1,startValue:null,endValue:null},a}return i(t,e),u(t,[{key:"SelectChange",value:function(e){this.setState({status:e})}},{key:"SelectTypeChange",value:function(e){this.setState({type:e})}},{key:"createPost",value:function(){var e=this.props.location.pathname;console.log("pathname:",this.props.location.pathname),h.hashHistory.push(e+"/add")}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.form.getFieldsValue();t.status=this.state.status,t.type=this.state.type,this.state.startValue&&(t.startValue=p.Datetime.getTimeStamp(this.state.startValue)/1e3),this.state.endValue&&(t.d=p.Datetime.getTimeStamp(this.state.endValue)/1e3),console.log("收到表单值：",t),this.props.brodcast(t)}},{key:"disabledStartDate",value:function(e){return e&&this.state.endValue?e.getTime()>=this.state.endValue.getTime():!1}},{key:"disabledEndDate",value:function(e){return e&&this.state.startValue?e.getTime()<=this.state.startValue.getTime():!1}},{key:"onChange",value:function(e,t){console.log(e,"change",t),this.setState(l({},e,t))}},{key:"onStartChange",value:function(e){this.onChange("startValue",e)}},{key:"onEndChange",value:function(e){this.onChange("endValue",e)}},{key:"render",value:function(){var e=this.props.form.getFieldProps;return d["default"].createElement("div",null,d["default"].createElement(f.Form,{inline:!0,onSubmit:this.handleSubmit,form:this.props.form},d["default"].createElement(g,{label:"标题："},d["default"].createElement(f.Input,s({placeholder:"请输入标题名"},e("title")))),d["default"].createElement(g,{label:"是否可见："},d["default"].createElement(f.Select,s({},e("status",{initialValue:"0"}),{value:this.state.status,onChange:this.SelectChange,style:{width:150},placeholder:"请选择状态"}),d["default"].createElement(y,{value:0},"全部"),d["default"].createElement(y,{value:1},"可见"),d["default"].createElement(y,{value:2},"不可见"))),d["default"].createElement(g,{label:"类型："},d["default"].createElement(f.Select,s({},e("type",{initialValue:"0"}),{value:this.state.type,onChange:this.SelectTypeChange,style:{width:150},placeholder:"请选择状态"}),d["default"].createElement(y,{value:0},"全部"),d["default"].createElement(y,{value:1},"活动"),d["default"].createElement(y,{value:2},"商品"),d["default"].createElement(y,{value:3},"帖子"),d["default"].createElement(y,{value:4},"外联"))),d["default"].createElement(g,{label:"创建时间："},d["default"].createElement(f.DatePicker,{disabledDate:this.disabledStartDate,value:this.state.startValue,placeholder:"开始日期",onChange:this.onStartChange}),"—",d["default"].createElement(f.DatePicker,{disabledDate:this.disabledEndDate,value:this.state.endValue,placeholder:"结束日期",onChange:this.onEndChange})),d["default"].createElement(f.Button,{type:"primary",htmlType:"submit"},"搜索"),d["default"].createElement(f.Button,{type:"primary",onClick:this.createPost,style:{marginLeft:10}},"新建轮播图")))}}]),t}(c.Component));m=f.Form.create()(m),e.exports=m},252:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),u=n(s),c=a(2),d=a(5),f=(a(32),a(7)),h=a(37),p=a(10),g=c.Modal.confirm,y=null,m=function(e){function t(e){l(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return y=setTimeout(function(){y=a},100),a.state={shows_url:"none",shows_other:"none",visible:!1,data:[],page:{pageIndex:1,pageSize:5,countNo:0},order_show:!1,searchData:{title:"",status:0,startValue:"",endValue:"",refsType:0}},a.handleOk=a.handleOk.bind(a),a.handleCancel=a.handleCancel.bind(a),a.ajaxListSuccess=a.ajaxListSuccess.bind(a),a.ajaxListError=a.ajaxListError.bind(a),a.getNotify=a.getNotify.bind(a),console.log("item:this:",a),a}return o(t,e),i(t,[{key:"clickConfirmHandle",value:function(){c.message.success("点击了确定")}},{key:"clickCancleHandle",value:function(){c.message.error("点击了取消")}},{key:"ajaxListSuccess",value:function(e){if(console.log("ajaxListSuccessdata：",e),0==e.rc){var t=[];e.list.map(function(e,a){e.key=e.galleryID,t.push(e)}),this.state.data=t,this.state.page.pageIndex=e.pageIndex,this.state.page.pageSize=e.pageSize,this.forceUpdate()}}},{key:"ajaxListError",value:function(e){console.log("err:",e)}},{key:"getList",value:function(){this.state.page.pageSize||(this.state.page.pageSize=5),this.state.searchData=p.Global.get("searchData"),f.PRO_REQUEST.ajax.requestData(f.PRO_URL.gallery.gallery_get_list,this.state.page,this.ajaxListSuccess,this.ajaxListError)}},{key:"componentWillMount",value:function(){if(!this.props.children){var e={pageIndex:this.state.page.pageIndex,pageSize:this.state.page.pageSize};f.PRO_REQUEST.ajax.requestData(h.gallery.gallery_get_list,e,this.ajaxListSuccess.bind(this),this.ajaxListError.bind(this))}}},{key:"showOrder",value:function(){console.log("展示熟悉呢"),this.setState({order_show:!0})}},{key:"handleOk",value:function(e){this.setState({order_show:!1})}},{key:"handleCancel",value:function(e){this.setState({order_show:!1})}},{key:"getNotify",value:function(e){console.log("getNotify:",e),y.getList()}},{key:"setStatusView",value:function(e,t,a,n){var l=this;console.log("index:",e),console.log("id:",t),console.log("obj:",a),console.log("text:",n),g({title:"您是否确认执行该操作",onOk:function(){console.log("确定"),f.PRO_REQUEST.ajax.requestData(h.gallery.gallery_set_status,{galleryID:t,status:0},function(t){if(console.log("data:",t),0==t.rc){var a=l.state.data;a.splice(e,1),l.setState({data:a})}},function(e){console.log("错误")})},onCancel:function(){}})}},{key:"showConfirms",value:function(e,t,a){var n=this;console.log("id:",t),g({title:"您是否确认要删除这项内容",content:"一些解释",onOk:function(){console.log("确定"),f.PRO_REQUEST.ajax.requestData(h.gallery.del,{galleryID:t},function(t){if(console.log("data:",t),0==t.rc){var a=n.state.data;a.splice(e,1),n.setState({data:a})}},function(e){console.log("错误")})},onCancel:function(){console.log(n.state.btn_name)}})}},{key:"render",value:function(){var e=this,t=[{title:"序号",dataIndex:"galleryID",key:"galleryID"},{title:"轮播图名称",dataIndex:"title",key:"title"},{title:"类型",dataIndex:"refsType",key:"refsType",render:function(e,t,a){var n=t.refsType;return 1==n?n="1类型":2==n&&(n="2类型"),u["default"].createElement("span",null,n)}},{title:"创建时间",dataIndex:"createdTime",key:"createdTime"},{title:"操作",dataIndex:"doing",key:"doing",render:function(t,a,n){var l=void 0;l=0==a.status?u["default"].createElement("a",{onClick:e.setStatusView.bind(e,n,a.galleryID,"1")},"设置可见"):u["default"].createElement("a",{onClick:e.setStatusView.bind(e,n,a.galleryID,"0")},"设置不可见");var r=u["default"].createElement(c.Menu,null,u["default"].createElement(c.Menu.Item,{key:"0"},u["default"].createElement("a",{onClick:e.showConfirms.bind(e,n,a.galleryID)},"删除")),u["default"].createElement(c.Menu.Divider,null));return u["default"].createElement("span",null,u["default"].createElement("a",{onClick:e.showOrder.bind(e)},"设置顺序"),u["default"].createElement("span",{className:"ant-divider"}),u["default"].createElement("span",null,u["default"].createElement(d.Link,{to:"/serial/gallery/edit/"+a.key,activeClassName:"active"},"编辑")),u["default"].createElement("span",{className:"ant-divider"}),l,u["default"].createElement("span",{className:"ant-divider"}),u["default"].createElement(c.Dropdown,{overlay:r,trigger:["click"]},u["default"].createElement("a",{className:"ant-dropdown-link",href:"#"},"更多 ",u["default"].createElement(c.Icon,{type:"down"}))))}}];return u["default"].createElement("div",null,this.props.children||u["default"].createElement("div",null,u["default"].createElement(c.Table,{columns:t,dataSource:this.state.data,pagination:this.pagination}),u["default"].createElement(c.Modal,{title:"排序",visible:this.state.order_show,onOk:this.handleOk,onCancel:this.handleCancel},u["default"].createElement("span",null,"输入序号（不超过5）:"),u["default"].createElement(c.InputNumber,{min:1,max:5,defaultValue:3}))))}},{key:"pagination",get:function(){return function(e){return{total:100,showQuickJumper:!0,onChange:function(t){console.log("currentPage:",t),e.state.page.pageIndex=t,e.getList()}}}(this)}}]),t}(s.Component);m.defaultProps={ShowHeader:!0,ShowFooter:!0,getNotify:m.prototype.getNotify},e.exports=m}});