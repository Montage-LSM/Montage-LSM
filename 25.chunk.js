webpackJsonp([25],{256:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),u=a(2),c=a(1),d=l(c),h=a(31),f=l(h),m=(a(32),a(13)),p=a(37),y=(a(73),u.Form.Item),g=u.Radio.Group,b=(u.Input.Group,u.DatePicker.RangePicker,function(e){function t(e){i(this,t);var a=n(this,Object.getPrototypeOf(t).call(this,e));return a.state={shows_url:"none",shows_other:"none",visible:!1,type:"",type_name:"",img_visible:!1,img_url:"",img_state:"warning",img_info:"暂未上传",id:a.props.params.id,status:!0,title:""},a.getFile=a.getFile.bind(a),console.log("id:",a.props.params.id),a}return s(t,e),o(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.form.getFieldsValue();return t.img_url=this.state.img_url,t.status?t.status=1:t.status=0,console.log("收到表单值：",this.props.form.getFieldsValue()),console.log(t),!1}},{key:"ajaxAddSuccess",value:function(e){console.log("data",e)}},{key:"ajaxAddError",value:function(e){console.log("err",e)}},{key:"onChange",value:function(e,t){console.log("From: ",e[0],", to: ",e[1]),console.log("From: ",t[0],", to: ",t[1])}},{key:"refsType_click",value:function(e,t){this.state.type=e,4==e?(this.state.shows_url="block",this.state.shows_other="none"):(this.state.shows_url="none",this.state.shows_other="block"),1==e&&(this.state.type_name="活动"),2==e&&(this.state.type_name="商品"),3==e&&(this.state.type_name="帖子")}},{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"handleOk",value:function(){this.setState({visible:!1})}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"handleImgOk",value:function(){this.setState({img_visible:!1})}},{key:"handleImgCancel",value:function(){this.setState({img_visible:!1})}},{key:"imgUpload",value:function(){this.setState({img_visible:!0})}},{key:"getFile",value:function(e){console.log("data:",e[0]);var t=e[0];t.url?this.setState({img_url:t.url,img_info:d["default"].createElement("a",{href:t.url,target:"_blank"},"上传成功"),img_state:"success"}):this.setState({img_state:"error",img_info:"蒙逼式上传失败..."})}},{key:"ajaxEditSucc",value:function(e){if(console.log("1:",e),0==e.rc){var t=!0;0==e.status&&(t=!1),this.setState({title:e.title,status:t})}}},{key:"ajaxEditErr",value:function(e){}},{key:"componentWillMount",value:function(){var e={galleryID:this.state.id};f["default"].ajax.requestData(p.gallery.gallery_get_details,e,this.ajaxEditSucc.bind(this),this.ajaxEditErr.bind(this))}},{key:"render",value:function(){console.log("555");var e=this.props.form.getFieldProps,t={labelCol:{span:3},wrapperCol:{span:14}};return d["default"].createElement(u.Form,{horizontal:!0,onSubmit:this.handleSubmit.bind(this)},d["default"].createElement(y,r({},t,{label:"标题名称：",required:!0}),d["default"].createElement(u.Input,r({type:"text"},e("title"),{style:{width:"50%"},value:this.state.title,placeholder:"请输入标题名称"}))),d["default"].createElement(y,r({},t,{label:"是否可见：",required:!0}),d["default"].createElement(u.Switch,r({},e("status"),{checked:this.state.status,checkedChildren:"开",unCheckedChildren:"关"}))),d["default"].createElement(y,r({},t,{label:"类型:",required:!0}),d["default"].createElement(g,e("refsType"),d["default"].createElement(u.Radio,{value:"1",onClick:this.refsType_click.bind(this,"3")},"帖子"),d["default"].createElement(u.Radio,{value:"3",onClick:this.refsType_click.bind(this,"2")},"商品"),d["default"].createElement(u.Radio,{value:"4",onClick:this.refsType_click.bind(this,"1")},"活动"),d["default"].createElement(u.Radio,{value:"5",onClick:this.refsType_click.bind(this,"4")},"外链"))),d["default"].createElement("div",{style:{display:this.state.shows_other}},d["default"].createElement(y,r({},t,{label:"选择:"}),d["default"].createElement(u.Button,{type:"primary",onClick:this.showModal.bind(this),style:{marginLeft:10}},"选 择",this.state.type_name),d["default"].createElement(u.Modal,{draggable:!0,title:"此模态中选择对应的圈子、帖子、新闻",visible:this.state.visible,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},d["default"].createElement("p",null,"新闻列表"),d["default"].createElement("p",null,"新闻列表"),d["default"].createElement("p",null,"新闻列表")))),d["default"].createElement("div",{style:{display:this.state.shows_url}},d["default"].createElement(y,r({},t,{label:"外链地址:"}),d["default"].createElement(u.Input,r({type:"text"},e("refsUrl"),{style:{width:"50%"},placeholder:"请输入链接地址"}))),";"),d["default"].createElement(y,r({},t,{label:"上传图片：",help:"上传提示：请不要超过5MB,默认生成:234px×150px，再次点击上传，会覆盖之前上传的"}),d["default"].createElement(u.Button,{type:"primary",required:!0,onClick:this.imgUpload.bind(this),style:{marginRight:20,"float":"left"}},"点击上传"),d["default"].createElement(u.Modal,{draggable:!0,title:"此模态中选择对应的圈子、帖子、新闻",visible:this.state.img_visible,onOk:this.handleImgOk.bind(this),onCancel:this.handleImgCancel.bind(this)},d["default"].createElement(m.UploadImage,{cbReceiver:this.getFile})),d["default"].createElement("div",{className:"dom_left",style:{marginRight:20}},d["default"].createElement(u.Alert,{message:this.state.img_info,type:this.state.img_state}))),d["default"].createElement(y,{wrapperCol:{span:16,offset:6},style:{marginTop:24}},d["default"].createElement(u.Button,{type:"primary",htmlType:"submit",style:{marginRight:20}},"确定"),d["default"].createElement(u.Button,{type:"primary",onClick:function(){window.history.go(-1)}},"返回")))}}]),t}(c.Component));b=u.Form.create()(b),b.defaultProps={ShowHeader:!1,ShowFooter:!1},e.exports=b}});