webpackJsonp([23],{267:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),c=a(1),u=i(c),h=a(14),m=(i(h),a(2)),f=a(7),p=a(13),g=a(32),b=(m.Radio.Group,m.Form.create),y=m.Form.Item,v=m.DatePicker.RangePicker,k=(m.Select.Option,function(e){function t(e){n(this,t);var a=l(this,Object.getPrototypeOf(t).call(this,e));return a.state={startValue:null,endValue:null,ownerCircleName:[],isCreative:"new"==a.props.params.activity_id,testdata:{isVisible:"0",isneedlogin:"1",begin_time:"2016-09-06",end_time:"2016-09-12",list_img:"www.qiniu.com?img1.1",isline:"0",circle_id:"2",title:"你好我是活动名称",address:"www.huodo.com"},data:{isVisible:"1",isneedlogin:"1",begin_time:"",end_time:"",list_img:"",isline:"1",circle_id:"",title:"",address:""}},a.getStartEndTime=a.getStartEndTime.bind(a),a.handleChange=a.handleChange.bind(a),a.isVisible=a.isVisible.bind(a),a.isneedloginProps=a.isneedloginProps.bind(a),a.islineProps=a.islineProps.bind(a),a.getListFile=a.getListFile.bind(a),a.selectProps=a.selectProps.bind(a),a.getCircleID=a.getCircleID.bind(a),a.ajaxDetailsSuccess=a.ajaxDetailsSuccess.bind(a),a.ajaxDetailsError=a.ajaxDetailsError.bind(a),a}return r(t,e),d(t,[{key:"getCircleID",value:function(e){event.preventDefault(),this.state.data.circle_id=e}},{key:"getListFile",value:function(e){this.setState({list_img:e}),this.state.data.list_img=e[0].url}},{key:"islineProps",value:function(e){this.state.data.isline=e?"1":"0"}},{key:"getStartEndTime",value:function(e,t){var a=g.Datetime.yyyymmddhhmm(t[0]).toString(),i=g.Datetime.yyyymmddhhmm(t[1]).toString();this.state.data.begin_time=a,this.state.data.end_time=i}},{key:"handleChange",value:function(e){}},{key:"isneedloginProps",value:function(e){this.state.data.isneedlogin=e?"1":"0"}},{key:"isVisible",value:function(e){event.preventDefault(),this.state.data.isVisible=e?"1":"0"}},{key:"selectProps",value:function(e){}},{key:"componentDidMount",value:function(){console.log("this.state.isCreative",this.state.isCreative),0==this.state.isCreative&&(console.log("this.props.params内params内容params内容params内error容params内容params内容容",this.props.params.activity_id),f.PRO_REQUEST.ajax.requestData(f.PRO_URL.activity.getActivityList_id,{activity_id:this.props.params.activity_id},this.ajaxDetailsSuccess,this.ajaxDetailsError))}},{key:"handleReset",value:function(e){e.preventDefault(),this.props.form.resetFields()}},{key:"ajaxDetailsSuccess",value:function(e){console.log("我是成功时：",e),console.log("我是开始的时候",this.state.testdata),this.state.testdata.isneedlogin=!!parseInt(this.state.testdata.isneedlogin),this.state.testdata.isVisible=!!parseInt(this.state.testdata.isVisible),this.state.testdata.isline=!!parseInt(this.state.testdata.isline);var t=this.state.testdata;console.log("testDate",t),this.setState({data:t}),console.log("isline:",this.state.data.isline),console.log("isneedlogin:",this.state.data.isneedlogin),this.state.data.isneedlogin=!1}},{key:"ajaxDetailsError",value:function(e){console.log("我是失败是：",e)}},{key:"ajaxAddSuccess",value:function(e){e.des&&m.message.info(e.des,5)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;this.props.form.validateFields(function(e,a){if(e)return void console.log("表单提交错误");console.log("Submit!!!");var i=t.state.data;t.setState({data:Object.assign(i,a)}),setTimeout(function(){console.log("dsdsdssssssssssssssssssssssssssss",t.state.data)},100)})}},{key:"disabledStartDate",value:function(e){return e&&this.state.endValue?e.getTime()>=this.state.endValue.getTime():!1}},{key:"disabledEndDate",value:function(e){return e&&this.state.startValue?e.getTime()<=this.state.startValue.getTime():!1}},{key:"onChange",value:function(e,t){this.setState(s({},e,t))}},{key:"onStartChange",value:function(e){this.onChange("startValue",e)}},{key:"onEndChange",value:function(e){this.onChange("endValue",e)}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps,a=(e.getFieldError,e.isFieldValidating,{titleProps:t("title",{rules:[{required:!0,rows:5,message:"请填写你的标题"}]}),addressProps:t("address",{rules:[{required:!0,message:"请填写你的详细地址"}]},{initialValue:this.state.data.address}),formItemLayout:{labelCol:{span:4},wrapperCol:{span:12}}});return u["default"].createElement("div",null,u["default"].createElement(m.Form,{horizontal:!0,form:this.props.form},u["default"].createElement(y,o({},a.formItemLayout,{label:"标题：",hasFeedback:!0}),u["default"].createElement(m.Input,o({},a.titleProps,{id:"title",value:this.state.data.title,placeholder:"请添加标题"}))),u["default"].createElement(y,o({},a.formItemLayout,{label:"是否登录："}),u["default"].createElement(m.Switch,{checked:this.state.data.isneedlogin,checkedChildren:"是",unCheckedChildren:"否",onChange:this.isneedloginProps})),u["default"].createElement(y,o({},a.formItemLayout,{label:"是否线上："}),u["default"].createElement(m.Switch,{checked:this.state.data.isline,checkedChildren:"是",unCheckedChildren:"否",onChange:this.islineProps})),u["default"].createElement(y,o({},a.formItemLayout,{label:"是否可见："}),u["default"].createElement(m.Switch,{checked:this.state.data.isVisible,checkedChildren:"是",unCheckedChildren:"否",onChange:this.isVisible})),u["default"].createElement(m.Form.Item,o({},a.formItemLayout,{label:"属于圈子："}),u["default"].createElement(p.SelectorCircle,o({},a.managerValidator,{id:"circleOwner",isMultiple:!1,cbReceiver:this.getCircleID,value:this.state.data.circle_id}))),u["default"].createElement(y,o({},a.formItemLayout,{label:"开始时间和结束时间：",hasFeedback:!0}),u["default"].createElement(v,o({},a.isTimeValid,{showTime:!0,format:"yyyy/MM/dd HH:mm:ss",onChange:this.getStartEndTime}))),u["default"].createElement(y,o({},a.formItemLayout,{label:"列表图"}),u["default"].createElement(p.UploadImage,{id:"avatar",fileList:this.state.avatar,cbReceiver:this.getListFile})),u["default"].createElement(y,o({},a.formItemLayout,{label:"详细地址：",hasFeedback:!0}),u["default"].createElement(m.Input,o({},a.addressProps,{value:this.state.data.address,placeholder:"请填写详细地址"}))),u["default"].createElement(y,{wrapperCol:{span:12,offset:7}},u["default"].createElement(m.Button,{type:"primary",onClick:this.handleSubmit.bind(this)},"确定"),"   ",u["default"].createElement(m.Button,{type:"ghost",onClick:this.handleReset.bind(this)},"重置"))))}}]),t}(c.Component));k=b()(k),k.defaultProps={ShowHeader:!1,ShowFooter:!1},e.exports=k}});